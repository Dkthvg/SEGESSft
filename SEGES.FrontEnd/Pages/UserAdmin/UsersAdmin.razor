@page "/UsersAdmin"


<div>
    <h3>Administrador de Usuarios</h3>
    <span>
        <i class="bi bi-people" /> Usuarios
        <a class="btn btn-sm btn-primary float-end" href="/register/?IsAdmin=true"><i class="bi bi-plus-circle" /> Adicionar Usuario</a>
    </span>
</div>
<div style="margin-top: 20px;"></div>

                
<RadzenDataGrid AllowFiltering="true" AllowColumnResize="true" AllowAlternatingRows="false" FilterMode="FilterMode.Advanced" AllowSorting="true" PageSize="5" AllowPaging="true" PagerHorizontalAlign="HorizontalAlign.Left" ShowPagingSummary="true"
                Data="@users" ColumnWidth="300px" LogicalFilterOperator="LogicalFilterOperator.Or" >

    <EmptyTemplate>
        <p style="color: lightgrey; font-size: 24px; text-align: center; margin: 2rem;">No hay registros para mostrar.</p>
    </EmptyTemplate>
    <Columns>
    
    
    <RadzenDataGridColumn Title="Usuario" Frozen="true" Sortable="true" Filterable="true" Width="160px" TextAlign="TextAlign.Left" >
            <Template Context="data">
                @if (data.Photo != null && data.Photo.Length > 0)
                {
                    <RadzenImage style="width: 40px; height: 40px; border-radius: 8px; margin-right: 8px; float: left;" Path="@data.Photo" AlternateText="@(data.FirstName + " " + data.LastName)" />
                }
                else
                {
                    <RadzenImage style="width: 40px; height: 40px; border-radius: 8px; margin-right: 8px; float: left;" Path="defaultProfilePic.svg" AlternateText="Default Photo" />
                }
                <RadzenText TextStyle="TextStyle.Subtitle2" class="mb-0" TextAlign="TextAlign.Left">@data.FullName</RadzenText>
                <RadzenText TextStyle="TextStyle.Caption" TextAlign="TextAlign.Left">@data.UserType</RadzenText>
            </Template>
    </RadzenDataGridColumn>
        <RadzenDataGridColumn Property="FullName" Title="Acciones" Frozen="true" Width="160px" Filterable="false" TextAlign="TextAlign.Center">
            <Template Context="data">
                <RadzenButton ButtonStyle="ButtonStyle.Info" Variant="Variant.Flat" Shade="Shade.Lighter" Icon="edit" class="m-1" Click=@(()=> Goto("EditUser")) Text="Editar" />
                <RadzenIcon ButtonStyle="ButtonStyle.Info" Variant="Variant.Flat" Shade="Shade.Lighter" Icon="delete" class="m-1"/>
            </Template>
        </RadzenDataGridColumn>

        <RadzenDataGridColumn Property="Document" Filterable="false" Title="ID" Frozen="false" TextAlign="TextAlign.Center" Width="30px" />
        <RadzenDataGridColumn Property="NormalizedUserName" Title="Nombre de Usuario" Frozen="false" Width="160px" Filterable="true" />
        <RadzenDataGridColumn Property="Email" Title="Correo" Frozen="false" Width="160px" Filterable="true" />
        <RadzenDataGridColumn Property="PhoneNumber" Title="Teléfono" Frozen="false" Width="160px" Filterable="false" />


    </Columns>
</RadzenDataGrid>
